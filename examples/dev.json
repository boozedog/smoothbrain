{
  "http": {"address": "0.0.0.0:8080"},
  "database": "smoothbrain.db",
  "log_level": "debug",
  "plugins": {
    "uptime-kuma": {"webhook_token": "$UPTIMEKUMA_WEBHOOK_TOKEN"},
    "xai": {"model": "grok-4-1-fast-non-reasoning", "api_key": "$XAI_API_KEY"},
    "mattermost": {"url": "$MATTERMOST_URL", "token": "$MATTERMOST_TOKEN", "listen": true},
    "claudecode": {"binary": "/Users/david/.local/bin/claude"},
    "obsidian": {"vault_path": "~/obsidian/smoothbrain"}
  },
  "routes": [
    {
      "name": "mattermost-twitter-search",
      "description": "Twitter/X search assistant",
      "source": "mattermost",
      "event": "x",
      "pipeline": [
        {
          "plugin": "xai",
          "action": "summarize",
          "params": {
            "prompt": "You are a Twitter/X search assistant. The user's message is a search topic. Use your knowledge of recent tweets and discussions on X/Twitter about this topic to provide a summary of the most relevant and popular posts. For each tweet you reference, include the direct link (https://x.com/username/status/id). If you don't have relevant information, say so. Be concise."
          }
        }
      ],
      "sink": {"plugin": "mattermost", "params": {}}
    },
    {
      "name": "mattermost-webmd",
      "description": "Fetch a URL as markdown",
      "source": "mattermost",
      "event": "md",
      "pipeline": [
        {"plugin": "webmd", "action": "fetch", "params": {}}
      ],
      "sink": {"plugin": "mattermost", "params": {}}
    },
    {
      "name": "mattermost-claudecode",
      "description": "Ask Claude Code a question",
      "source": "mattermost",
      "event": "cc",
      "timeout": "120s",
      "pipeline": [
        {"plugin": "claudecode", "action": "ask", "params": {}}
      ],
      "sink": {"plugin": "mattermost", "params": {}}
    },
    {
      "name": "mattermost-note",
      "description": "Add to daily diary",
      "source": "mattermost",
      "event": "note",
      "pipeline": [
        {"plugin": "obsidian", "action": "write_note", "params": {}}
      ],
      "sink": {"plugin": "mattermost", "params": {}}
    },
    {
      "name": "mattermost-vault",
      "description": "Search the Obsidian vault",
      "source": "mattermost",
      "event": "vault",
      "timeout": "60s",
      "pipeline": [
        {"plugin": "obsidian", "action": "search", "params": {}},
        {"plugin": "xai", "action": "summarize", "params": {"prompt": "Answer the user's question using the vault search results provided. Be concise and specific."}}
      ],
      "sink": {"plugin": "mattermost", "params": {}}
    },
    {
      "name": "mattermost-vehicle-log",
      "description": "Log vehicle maintenance",
      "source": "mattermost",
      "event": "log",
      "timeout": "60s",
      "pipeline": [
        {"plugin": "xai", "action": "summarize", "params": {"prompt": "Parse this vehicle maintenance command. Extract JSON: {\"vehicle\": \"\", \"description\": \"\", \"miles\": \"\", \"cost\": \"\", \"location\": \"\"}. Only return JSON."}},
        {"plugin": "obsidian", "action": "write_log", "params": {}}
      ],
      "sink": {"plugin": "mattermost", "params": {}}
    },
    {
      "name": "mattermost-link",
      "description": "Save a link to daily note",
      "source": "mattermost",
      "event": "link",
      "pipeline": [
        {"plugin": "obsidian", "action": "write_link", "params": {}}
      ],
      "sink": {"plugin": "mattermost", "params": {}}
    }
  ],
  "supervisor": {"tasks": []}
}
